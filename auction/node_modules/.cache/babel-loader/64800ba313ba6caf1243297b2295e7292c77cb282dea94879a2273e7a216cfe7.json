{"ast":null,"code":"import React,{useEffect,useState}from'react';import config from'../config';import'./Profile.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const[activeTab,setActiveTab]=useState('listings');// 'listings' or 'biddings'\nconst[listings,setListings]=useState([]);// Ensure it's initialized as an empty array\nconst[biddings,setBiddings]=useState([]);// Ensure it's initialized as an empty array\nconst[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{if(activeTab==='listings'){fetchUserListings();}else if(activeTab==='biddings'){fetchUserBids();}},[activeTab]);const fetchUserListings=async()=>{const token=localStorage.getItem('jwtToken');if(!token){setError('No token found');setLoading(false);return;}try{const response=await fetch(`${config.API_BASE_URL}/get-user-listing`,{method:'GET',headers:{Authorization:`Bearer ${token}`}});if(!response.ok){throw new Error(`Failed to fetch listings. Status: ${response.status}`);}const data=await response.json();setListings(data.Tickets||[]);// Default to an empty array if Tickets is undefined\n}catch(error){setError('Failed to fetch listings.');}finally{setLoading(false);}};const fetchUserBids=async()=>{const token=localStorage.getItem('jwtToken');if(!token){setError('No token found');setLoading(false);return;}try{const response=await fetch(`${config.API_BASE_URL}/get-user-bids`,{method:'GET',headers:{Authorization:`Bearer ${token}`}});if(!response.ok){throw new Error(`Failed to fetch biddings. Status: ${response.status}`);}const data=await response.json();setBiddings(data.bids||[]);// Default to an empty array if bids is undefined\n}catch(error){setError('Failed to fetch biddings.');}finally{setLoading(false);}};const renderListings=()=>{if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{children:error});if(!listings||listings.length===0){return/*#__PURE__*/_jsx(\"p\",{children:\"No listings available.\"});}return listings.map(listing=>/*#__PURE__*/_jsxs(\"div\",{className:\"listing-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:listing.eventName}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(listing.eventDate).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \\u20B9\",listing.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Seats:\"}),\" \",listing.seatInfo.map(seat=>`#${seat.seatNumber} (Block: ${seat.block}, Level: ${seat.level})`).join(', ')]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Time Left:\"}),\" \",calculateTimeLeft(listing.deadline)]})]},listing.ticketId));};const renderBiddings=()=>{if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{children:error});if(!biddings||biddings.length===0){return/*#__PURE__*/_jsx(\"p\",{children:\"No biddings available.\"});}return biddings.map(bid=>/*#__PURE__*/_jsxs(\"div\",{className:\"bidding-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:bid.venue}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Original Price:\"}),\" \\u20B9\",bid.originalPrice]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Your Bid:\"}),\" \\u20B9\",bid.bidPrice]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Bid Date:\"}),\" \",new Date(bid.createdAt).toLocaleDateString()]})]},bid.BidId));};const calculateTimeLeft=deadline=>{const difference=new Date(deadline)-new Date();const days=Math.floor(difference/(1000*60*60*24));const hours=Math.floor(difference/(1000*60*60)%24);const minutes=Math.floor(difference/1000/60%60);const seconds=Math.floor(difference/1000%60);return`${days}d ${hours}h ${minutes}m ${seconds}s`;};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('listings'),className:activeTab==='listings'?'active':'',children:\"My Listings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('biddings'),className:activeTab==='biddings'?'active':'',children:\"My Biddings\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-content\",children:activeTab==='listings'?renderListings():renderBiddings()})]});}export default Profile;","map":{"version":3,"names":["React","useEffect","useState","config","jsx","_jsx","jsxs","_jsxs","Profile","activeTab","setActiveTab","listings","setListings","biddings","setBiddings","loading","setLoading","error","setError","fetchUserListings","fetchUserBids","token","localStorage","getItem","response","fetch","API_BASE_URL","method","headers","Authorization","ok","Error","status","data","json","Tickets","bids","renderListings","children","length","map","listing","className","eventName","Date","eventDate","toLocaleDateString","price","seatInfo","seat","seatNumber","block","level","join","calculateTimeLeft","deadline","ticketId","renderBiddings","bid","venue","originalPrice","bidPrice","createdAt","BidId","difference","days","Math","floor","hours","minutes","seconds","onClick"],"sources":["/Users/hemantsharma/auction/auction/src/components/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport config from '../config';\nimport './Profile.css';\n\nfunction Profile() {\n    const [activeTab, setActiveTab] = useState('listings'); // 'listings' or 'biddings'\n    const [listings, setListings] = useState([]); // Ensure it's initialized as an empty array\n    const [biddings, setBiddings] = useState([]); // Ensure it's initialized as an empty array\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        if (activeTab === 'listings') {\n            fetchUserListings();\n        } else if (activeTab === 'biddings') {\n            fetchUserBids();\n        }\n    }, [activeTab]);\n\n    const fetchUserListings = async () => {\n        const token = localStorage.getItem('jwtToken');\n        if (!token) {\n            setError('No token found');\n            setLoading(false);\n            return;\n        }\n\n        try {\n            const response = await fetch(`${config.API_BASE_URL}/get-user-listing`, {\n                method: 'GET',\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(`Failed to fetch listings. Status: ${response.status}`);\n            }\n\n            const data = await response.json();\n            setListings(data.Tickets || []); // Default to an empty array if Tickets is undefined\n        } catch (error) {\n            setError('Failed to fetch listings.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const fetchUserBids = async () => {\n        const token = localStorage.getItem('jwtToken');\n        if (!token) {\n            setError('No token found');\n            setLoading(false);\n            return;\n        }\n\n        try {\n            const response = await fetch(`${config.API_BASE_URL}/get-user-bids`, {\n                method: 'GET',\n                headers: {\n                    Authorization: `Bearer ${token}`,\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(`Failed to fetch biddings. Status: ${response.status}`);\n            }\n\n            const data = await response.json();\n            setBiddings(data.bids || []); // Default to an empty array if bids is undefined\n        } catch (error) {\n            setError('Failed to fetch biddings.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const renderListings = () => {\n        if (loading) return <p>Loading...</p>;\n        if (error) return <p>{error}</p>;\n\n        if (!listings || listings.length === 0) {\n            return <p>No listings available.</p>;\n        }\n\n        return listings.map((listing) => (\n            <div key={listing.ticketId} className=\"listing-item\">\n                <h3>{listing.eventName}</h3>\n                <p><strong>Date:</strong> {new Date(listing.eventDate).toLocaleDateString()}</p>\n                <p><strong>Price:</strong> ₹{listing.price}</p>\n                <p><strong>Seats:</strong> {listing.seatInfo.map(seat => `#${seat.seatNumber} (Block: ${seat.block}, Level: ${seat.level})`).join(', ')}</p>\n                <p><strong>Time Left:</strong> {calculateTimeLeft(listing.deadline)}</p>\n            </div>\n        ));\n    };\n\n    const renderBiddings = () => {\n        if (loading) return <p>Loading...</p>;\n        if (error) return <p>{error}</p>;\n\n        if (!biddings || biddings.length === 0) {\n            return <p>No biddings available.</p>;\n        }\n\n        return biddings.map((bid) => (\n            <div key={bid.BidId} className=\"bidding-item\">\n                <h3>{bid.venue}</h3>\n                <p><strong>Original Price:</strong> ₹{bid.originalPrice}</p>\n                <p><strong>Your Bid:</strong> ₹{bid.bidPrice}</p>\n                <p><strong>Bid Date:</strong> {new Date(bid.createdAt).toLocaleDateString()}</p>\n            </div>\n        ));\n    };\n\n    const calculateTimeLeft = (deadline) => {\n        const difference = new Date(deadline) - new Date();\n        const days = Math.floor(difference / (1000 * 60 * 60 * 24));\n        const hours = Math.floor((difference / (1000 * 60 * 60)) % 24);\n        const minutes = Math.floor((difference / 1000 / 60) % 60);\n        const seconds = Math.floor((difference / 1000) % 60);\n        return `${days}d ${hours}h ${minutes}m ${seconds}s`;\n    };\n\n    return (\n        <div className=\"profile-section\">\n            <div className=\"profile-tabs\">\n                <button\n                    onClick={() => setActiveTab('listings')}\n                    className={activeTab === 'listings' ? 'active' : ''}\n                >\n                    My Listings\n                </button>\n                <button\n                    onClick={() => setActiveTab('biddings')}\n                    className={activeTab === 'biddings' ? 'active' : ''}\n                >\n                    My Biddings\n                </button>\n            </div>\n\n            <div className=\"profile-content\">\n                {activeTab === 'listings' ? renderListings() : renderBiddings()}\n            </div>\n        </div>\n    );\n}\n\nexport default Profile;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,WAAW,CAC9B,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvB,QAAS,CAAAC,OAAOA,CAAA,CAAG,CACf,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGR,QAAQ,CAAC,UAAU,CAAC,CAAE;AACxD,KAAM,CAACS,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAAE;AAC9C,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAAE;AAC9C,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAExCD,SAAS,CAAC,IAAM,CACZ,GAAIQ,SAAS,GAAK,UAAU,CAAE,CAC1BU,iBAAiB,CAAC,CAAC,CACvB,CAAC,IAAM,IAAIV,SAAS,GAAK,UAAU,CAAE,CACjCW,aAAa,CAAC,CAAC,CACnB,CACJ,CAAC,CAAE,CAACX,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAU,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CAClC,KAAM,CAAAE,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAC9C,GAAI,CAACF,KAAK,CAAE,CACRH,QAAQ,CAAC,gBAAgB,CAAC,CAC1BF,UAAU,CAAC,KAAK,CAAC,CACjB,OACJ,CAEA,GAAI,CACA,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGtB,MAAM,CAACuB,YAAY,mBAAmB,CAAE,CACpEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACLC,aAAa,CAAE,UAAUR,KAAK,EAClC,CACJ,CAAC,CAAC,CAEF,GAAI,CAACG,QAAQ,CAACM,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,qCAAqCP,QAAQ,CAACQ,MAAM,EAAE,CAAC,CAC3E,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClCtB,WAAW,CAACqB,IAAI,CAACE,OAAO,EAAI,EAAE,CAAC,CAAE;AACrC,CAAE,MAAOlB,KAAK,CAAE,CACZC,QAAQ,CAAC,2BAA2B,CAAC,CACzC,CAAC,OAAS,CACNF,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAED,KAAM,CAAAI,aAAa,CAAG,KAAAA,CAAA,GAAY,CAC9B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAC9C,GAAI,CAACF,KAAK,CAAE,CACRH,QAAQ,CAAC,gBAAgB,CAAC,CAC1BF,UAAU,CAAC,KAAK,CAAC,CACjB,OACJ,CAEA,GAAI,CACA,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGtB,MAAM,CAACuB,YAAY,gBAAgB,CAAE,CACjEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACLC,aAAa,CAAE,UAAUR,KAAK,EAClC,CACJ,CAAC,CAAC,CAEF,GAAI,CAACG,QAAQ,CAACM,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,qCAAqCP,QAAQ,CAACQ,MAAM,EAAE,CAAC,CAC3E,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClCpB,WAAW,CAACmB,IAAI,CAACG,IAAI,EAAI,EAAE,CAAC,CAAE;AAClC,CAAE,MAAOnB,KAAK,CAAE,CACZC,QAAQ,CAAC,2BAA2B,CAAC,CACzC,CAAC,OAAS,CACNF,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAED,KAAM,CAAAqB,cAAc,CAAGA,CAAA,GAAM,CACzB,GAAItB,OAAO,CAAE,mBAAOV,IAAA,MAAAiC,QAAA,CAAG,YAAU,CAAG,CAAC,CACrC,GAAIrB,KAAK,CAAE,mBAAOZ,IAAA,MAAAiC,QAAA,CAAIrB,KAAK,CAAI,CAAC,CAEhC,GAAI,CAACN,QAAQ,EAAIA,QAAQ,CAAC4B,MAAM,GAAK,CAAC,CAAE,CACpC,mBAAOlC,IAAA,MAAAiC,QAAA,CAAG,wBAAsB,CAAG,CAAC,CACxC,CAEA,MAAO,CAAA3B,QAAQ,CAAC6B,GAAG,CAAEC,OAAO,eACxBlC,KAAA,QAA4BmC,SAAS,CAAC,cAAc,CAAAJ,QAAA,eAChDjC,IAAA,OAAAiC,QAAA,CAAKG,OAAO,CAACE,SAAS,CAAK,CAAC,cAC5BpC,KAAA,MAAA+B,QAAA,eAAGjC,IAAA,WAAAiC,QAAA,CAAQ,OAAK,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAM,IAAI,CAACH,OAAO,CAACI,SAAS,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAAI,CAAC,cAChFvC,KAAA,MAAA+B,QAAA,eAAGjC,IAAA,WAAAiC,QAAA,CAAQ,QAAM,CAAQ,CAAC,UAAE,CAACG,OAAO,CAACM,KAAK,EAAI,CAAC,cAC/CxC,KAAA,MAAA+B,QAAA,eAAGjC,IAAA,WAAAiC,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACG,OAAO,CAACO,QAAQ,CAACR,GAAG,CAACS,IAAI,EAAI,IAAIA,IAAI,CAACC,UAAU,YAAYD,IAAI,CAACE,KAAK,YAAYF,IAAI,CAACG,KAAK,GAAG,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,EAAI,CAAC,cAC5I9C,KAAA,MAAA+B,QAAA,eAAGjC,IAAA,WAAAiC,QAAA,CAAQ,YAAU,CAAQ,CAAC,IAAC,CAACgB,iBAAiB,CAACb,OAAO,CAACc,QAAQ,CAAC,EAAI,CAAC,GALlEd,OAAO,CAACe,QAMb,CACR,CAAC,CACN,CAAC,CAED,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CACzB,GAAI1C,OAAO,CAAE,mBAAOV,IAAA,MAAAiC,QAAA,CAAG,YAAU,CAAG,CAAC,CACrC,GAAIrB,KAAK,CAAE,mBAAOZ,IAAA,MAAAiC,QAAA,CAAIrB,KAAK,CAAI,CAAC,CAEhC,GAAI,CAACJ,QAAQ,EAAIA,QAAQ,CAAC0B,MAAM,GAAK,CAAC,CAAE,CACpC,mBAAOlC,IAAA,MAAAiC,QAAA,CAAG,wBAAsB,CAAG,CAAC,CACxC,CAEA,MAAO,CAAAzB,QAAQ,CAAC2B,GAAG,CAAEkB,GAAG,eACpBnD,KAAA,QAAqBmC,SAAS,CAAC,cAAc,CAAAJ,QAAA,eACzCjC,IAAA,OAAAiC,QAAA,CAAKoB,GAAG,CAACC,KAAK,CAAK,CAAC,cACpBpD,KAAA,MAAA+B,QAAA,eAAGjC,IAAA,WAAAiC,QAAA,CAAQ,iBAAe,CAAQ,CAAC,UAAE,CAACoB,GAAG,CAACE,aAAa,EAAI,CAAC,cAC5DrD,KAAA,MAAA+B,QAAA,eAAGjC,IAAA,WAAAiC,QAAA,CAAQ,WAAS,CAAQ,CAAC,UAAE,CAACoB,GAAG,CAACG,QAAQ,EAAI,CAAC,cACjDtD,KAAA,MAAA+B,QAAA,eAAGjC,IAAA,WAAAiC,QAAA,CAAQ,WAAS,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAM,IAAI,CAACc,GAAG,CAACI,SAAS,CAAC,CAAChB,kBAAkB,CAAC,CAAC,EAAI,CAAC,GAJ1EY,GAAG,CAACK,KAKT,CACR,CAAC,CACN,CAAC,CAED,KAAM,CAAAT,iBAAiB,CAAIC,QAAQ,EAAK,CACpC,KAAM,CAAAS,UAAU,CAAG,GAAI,CAAApB,IAAI,CAACW,QAAQ,CAAC,CAAG,GAAI,CAAAX,IAAI,CAAC,CAAC,CAClD,KAAM,CAAAqB,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACH,UAAU,EAAI,IAAI,CAAG,EAAE,CAAG,EAAE,CAAG,EAAE,CAAC,CAAC,CAC3D,KAAM,CAAAI,KAAK,CAAGF,IAAI,CAACC,KAAK,CAAEH,UAAU,EAAI,IAAI,CAAG,EAAE,CAAG,EAAE,CAAC,CAAI,EAAE,CAAC,CAC9D,KAAM,CAAAK,OAAO,CAAGH,IAAI,CAACC,KAAK,CAAEH,UAAU,CAAG,IAAI,CAAG,EAAE,CAAI,EAAE,CAAC,CACzD,KAAM,CAAAM,OAAO,CAAGJ,IAAI,CAACC,KAAK,CAAEH,UAAU,CAAG,IAAI,CAAI,EAAE,CAAC,CACpD,MAAO,GAAGC,IAAI,KAAKG,KAAK,KAAKC,OAAO,KAAKC,OAAO,GAAG,CACvD,CAAC,CAED,mBACI/D,KAAA,QAAKmC,SAAS,CAAC,iBAAiB,CAAAJ,QAAA,eAC5B/B,KAAA,QAAKmC,SAAS,CAAC,cAAc,CAAAJ,QAAA,eACzBjC,IAAA,WACIkE,OAAO,CAAEA,CAAA,GAAM7D,YAAY,CAAC,UAAU,CAAE,CACxCgC,SAAS,CAAEjC,SAAS,GAAK,UAAU,CAAG,QAAQ,CAAG,EAAG,CAAA6B,QAAA,CACvD,aAED,CAAQ,CAAC,cACTjC,IAAA,WACIkE,OAAO,CAAEA,CAAA,GAAM7D,YAAY,CAAC,UAAU,CAAE,CACxCgC,SAAS,CAAEjC,SAAS,GAAK,UAAU,CAAG,QAAQ,CAAG,EAAG,CAAA6B,QAAA,CACvD,aAED,CAAQ,CAAC,EACR,CAAC,cAENjC,IAAA,QAAKqC,SAAS,CAAC,iBAAiB,CAAAJ,QAAA,CAC3B7B,SAAS,GAAK,UAAU,CAAG4B,cAAc,CAAC,CAAC,CAAGoB,cAAc,CAAC,CAAC,CAC9D,CAAC,EACL,CAAC,CAEd,CAEA,cAAe,CAAAjD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}